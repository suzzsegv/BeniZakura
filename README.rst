=================================================
 紅桜エディタ
=================================================

はじめに
========

MS-DOS 時代に MIFES や VZ と共に一世を風靡した RED2 というエディタがありました。この、RED2 ライクな操作性を
サクラエディタ(Sakura Editor)で実現するために派生させたものが「紅桜」です。（RED SAKURA で「紅桜」です。）

RED2 の多くの機能は、サクラエディタの機能で実現可能ですので、今のところキーバインドやメニューデフォルト等の変更が
主ですが、使っていて不便な部分は改良したいと思っています。


変更点
=======================================

2013.01.01 - Ver 0.0.0.3
------------------------------------------------------------------

 * アプリケーションのアイコンを変更

 * C/C++ プリプロセッサによるコメントのネスト対応
    #if 0 ～ #endif がネストした状態でも正しくカラーリングできるよう改良。
    ただし、暫定実装の部分が残っているため、カラーリング処理の速度は低下しているはずです。

 * タイプ別設定: 「行の間隔」のデフォルトを 1 -> 0 に変更

 * １行の最大桁数を 10240 -> 1024 に変更

 * サクラエディタ SVN Rev.2513 までの変更を反映
    ただし、以下の変更に関しては、変更が衝突していたため未反映です。
        * 2505: Fix:  古いキー割り当て設定をImportすると誤動作する
        * 2511: Imp:  キーコードからコマンドを検索する時のループを除去

2012.12.01 - Ver 0.0.0.2
------------------------------------------------------------------

 * ルーラーを 8 文字単位で表示するように変更

 * 検索 ダイアログ:「見つからないときにメッセージを表示」チェックボックスを削除

 * ジャンプ ダイアログ: PL/SQL 関連の機能を削除

 * バージョン情報 ダイアログ: コントロールの配置を調整

 * 検索や GREP 時の「英大文字と小文字を区別する」のデフォルトを「有効」に変更

 * 共通設定: 「ファイルの排他制御」のデフォルト値を「上書きを禁止する」から「しない」に変更

 * 共通設定: GREP 結果のリアルタイム表示を「有効」に変更

 * 共通設定: ウィンドウ非アクティブ時のタイトルバー表示を、ウィンドウアクティブ時と同一に

 * タイプ別設定: C/C++, Java のスマートインデントのデフォルトを「無効」に変更

 * デフォルトの表示色を RED2 ライクな配色に変更
    * ルーラーの背景色をグリーンに
    * TAB を暗いブルーに
    * 改行記号をイエローに
    * 行番号をグレーに

 * サクラエディタ SVN Rev.2498 までの変更を反映


2012.11.01 - Ver 0.0.0.1 (サクラエディタ Ver.2.0.5.0 からの変更点)
------------------------------------------------------------------

 * 背景色のデフォルトを「黒地」ベースに変更

 * キーバインドのデフォルトを RED2 ライクなバインドに変更

    ただし、Windows 標準機能に関する CTRL + Z, X, C, V など、サクラエディタのキーバインドを継承している部分も多いです。
    参考までに、RED2 とキーバインドが異なる CTRL キーのバインドは以下のとおりです。

    ===========  ==========================  ==========================
    キー         RED2                        紅桜                      
    ===========  ==========================  ==========================
    CTRL + C     ファイルの最後にジャンプ    コピー
    CTRL + F     １語先（右）に進む          検索ダイアログ
    CTRL + G     カーソル上の文字を削除      Grep ダイアログ
    CTRL + H     カーソル直前の文字を削除    未割り当て
    CTRL + J     大文字小文字変換            指定行へジャンプ
    CTRL + M     改行入力                    ブックマーク
    CTRL + O     改行・タブ表示切替          アウトライン表示
    CTRL + R     ファイル先頭にジャンプ      置換ダイアログ
    CTRL + S     カーソル左                  上書き保存
    CTRL + V     カーソルから左の文字を削除  貼り付け
    CTRL + X     カーソル下                  切り取り
    CTRL + Z     拡張コントロールキー        元に戻す
    CTRL + E     カーソル上                  ウィンドウ一覧
    CTRL + D     カーソル右                  単語削除
    ===========  ==========================  ==========================
    ※ CTRL + I は未割り当て状態ですが、 TAB が入力されます

    RED2 の F1 ～ F4 メニューに相当する機能は、カスタムメニューで実現しています。コントロールキーのバインドされて
    いないファイル先頭へのジャンプは F2 - T, ファイル末尾へのジャンプは F2 - B で代用してください。

 * 「行頭に移動(折り返し単位)」のデフォルト動作を、空白を無視して移動するように変更
    サクラエディタは「行頭に移動(折り返し単位)」でカーソルを移動する場合に、行頭のホワイトスペース位置に移動して
    いましたが、RED2 と同様、行頭に移動するように変更しました。（紅桜では SHIFT + ← にバインド）


 * 「改行」機能を追加
    RED2 では CTRL + M にバインドされていた機能ですが、紅桜の CTRL + M はサクラエディタと同様「マーク」機能のままです。
    RED2 と同じキーバインドを実現したい場合に使用してください。


 * 「単語取り込み」機能を追加
    実装はしたものの、デフォルトキーにはバインドされていません。


 * 「現在位置～単語末尾の文字で検索」機能を追加
    RED2 で CTRL + L にバインドされていた「カーソル位置文字列を検索バッファに取り込む」機能。RED2 から機能を拡張して
    おり、検索バッファに取り込むと同時に検索を行います。RED2 と同様、連続実行することで、後続の単語を追加して
    再検索を行います。デフォルトでは ALT + L にバインド。


 * 「現在位置の単語で検索」機能を追加
    上記の「現在位置～単語末尾の文字で検索」と同様の機能ですが、サクラエディタの単語取り込みと同様、カーソルより
    前方向に単語区切りを探して単語を取り込みます。連続実行することで、後続の単語を追加して再検索を行います。
    デフォルトでは CTRL + L にバインド。


 * ダブルクリックに「現在位置の単語で検索」機能をバインド
    上記の機能をダブルクリックにもバインドしていますので、マウスのみで単語検索を行うことができます。


 * 単語取り込み時の文字種別に「括弧」を追加
    括弧は ( ) { } [ ]  の 6 文字で、これらの括弧は常に単語の区切りとして認識されます。


 * C/C++ ソース編集時に、プリプロセッサを用いたコメントアウトが正しくカラーリングできない問題に対応
    サクラエディタでは、ブロックコメントのデフォルトに #if 0 と #endif を定義して、プリプロセッサ コメントの
    カラーリングを実現していたため、途中に #else や #elif などが記述されていても、 #endif までコメントとして
    カラーリングされていました。
    対策として、 #if 0 をコメント開始、#endif、#else、#elif をコメント終了として判定を行う処理を追加して、
    カラーリングを行うように変更しています。


 * 色指定に「C/C++ プリプロセッサコメント」項目を追加
    コメントとは別の色を設定可能です。デフォルト色はグレー。


 * 挿入モード時の DOS タイプカーソルの高さを、半分から ÷ 2.6 に変更（少し低くした）
    半分の高さだと "-" の上にカーソルがある場合に文字があるのか無いのか、わからなくなってしまうため。


 * 「検索／置換」の対象文字列が見つからなかった場合のダイアログ表示を削除
    いちいちダイアログが開くのは煩わしかったので削除しました。

 * キーボードの「Pause」キーを使用可能に変更
    ノート PC など「Home」キーが存在しない機種で、代替キーとして使用できるように。デフォルトのキーバインドは「Home」
    と同様、ウィンドウの切り替えに設定されています。


 * ウィンドウの「最大化」機能を追加
    WMed32 と同様、デフォルトでは F12 にバインド。


 * C/C++ 強調キーワードのデフォルト定義を３種類に分割
    プリプロセッサ、データタイプを別々に定義。


 * タイプ別設定のうち、個人的に使用頻度の低い設定を削除
    HTML, SQL, COBOL, AWK, DOS Batch, Pascal, TEX, Perl, VB, Rich Text を削除


 * その他、各種デフォルト値の変更



ソースコード
============
    

ライセンス
----------
サクラエディタの最近の変更部分については「zlib/libpng ライセンス」を適用しているようですので、紅桜の変更部分も
これに倣い、「 zlib / libpng ライセンス」を適用します。
    

リポジトリ
----------
本家、サクラエディタの Subversion リポジトリ内の trunk2 ディレクトリを HgSubversion にて Mercurial リポジトリに
変換したものをベースにしています。リポジトリは bitbucket にて公開していますが、現状、試行錯誤をしている最中ですので、
リポジトリの再作成やチェンジセットの削除も行なっています。リポジトリを clone する場合にはご注意ください。

    https://bitbucket.org/suzzsegv/benizakura/


ビルド方法
==========
Visual C++ 2008 Express Edition SP1 を用いてビルドしています。sakura\BeniZakura.vcproj をダブルクリックして
IDE を起動後、ターゲットとして Release_Unicode を選択、ビルドメニューからビルドを行ってください。


